<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Kakao지도 여러 개 마커 표시</title>
</head>
<body>
	<div id="map" style="width:500px;height:400px;"></div>
	<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=7878d3773ee1aa648837e884de17feab"></script>
<script>

      var container = document.getElementById('map'); //지도가 표시될 영역
      var options = {
         center: new kakao.maps.LatLng(37.486112, 126.896792), //지도의 중심좌표
         level: 3 //지도 레벨에 따라 확대/축소 가능(숫자가 높을 수록 축소)
      };
      //위도 경도는 구글맵에 마우스 오른쪽 눌러 위치공유하면 알 수 있다/

      var map = new kakao.maps.Map(container, options);
      // 마커를 표시할 위치와 내용을 가지고 있는 객체 배열입니다 
      var positions = [ //객체배열
         {
            content: '<div>더좋은</div>', 
            latlng: new kakao.maps.LatLng(37.485997,126.897464)
         },
         {
            content: '<div>kfc</div>', 
            latlng: new kakao.maps.LatLng(37.485433, 126.896485)
         },
         {
            content: '<div>macdonald</div>', 
            latlng: new kakao.maps.LatLng(37.485136, 126.894939)
         },
         {
            content: '<div>starbucks</div>',
            latlng: new kakao.maps.LatLng(37.485736, 126.895788)
         }
      ];

      for (var i = 0; i < positions.length; i ++) { //positions 객체배열을 순회하며
         // 마커를 생성합니다
         var marker = new kakao.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: positions[i].latlng // 마커의 위치
         });

         var infowindow = new kakao.maps.InfoWindow({  // new kakao.maps.InfoWindow(options)마커에 표시할 인포윈도우를 생성합니다 
            content: positions[i].content // 인포윈도우에 표시할 내용
         });

         // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
         // 이벤트 리스너로는 클로저를 만들어 등록합니다 
         // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
         kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow)); //마우스 올렸을 때 지도, 마커, 글자 생성
         kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow)); //마우스가 빠지면 글자 빠짐
      }

      // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
      function makeOverListener(map, marker, infowindow) { //맵, 마커, 인포윈도를 매개변수처럼 부름
         return function() {
            infowindow.open(map, marker); //마우스 올렸을 때 이것
         };
      }

      // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
            // 클로저(Closure)는 반환된 내부함수가 자신이 선언됐을 때의 환경(Lexical environment)인 스코프를 기억하여, 
            // 만일 자신이 선언됐을 때의 환경(스코프) 밖에서 호출되어도 스코프에 접근할 수 있는 함수
      function makeOutListener(infowindow) {
         return function() {
            infowindow.close();
         };
      }

      /* 아래와 같이도 할 수 있습니다 */
      /*
      for (var i = 0; i < positions.length; i ++) {
         // 마커를 생성합니다
         var marker = new kakao.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: positions[i].latlng // 마커의 위치
         });

         // 마커에 표시할 인포윈도우를 생성합니다 
         var infowindow = new kakao.maps.InfoWindow({
            content: positions[i].content // 인포윈도우에 표시할 내용
         });

         // 마커에 이벤트를 등록하는 함수 만들고 즉시 호출하여 클로저를 만듭니다
         // 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
         (function(marker, infowindow) {
            // 마커에 mouseover 이벤트를 등록하고 마우스 오버 시 인포윈도우를 표시합니다 
            kakao.maps.event.addListener(marker, 'mouseover', function() {
                  infowindow.open(map, marker);
            });

            // 마커에 mouseout 이벤트를 등록하고 마우스 아웃 시 인포윈도우를 닫습니다
            kakao.maps.event.addListener(marker, 'mouseout', function() {
                  infowindow.close();
            });
         })(marker, infowindow);
      }
      */

</script>
</body>
</html>